- type: serial
  name: default
  steps:
    - service: run-test
      name: lint
      command: yarn lint
    - service: run-test
      name: test
      command: bash /usr/src/app/scripts/cover.sh

# development
# ----------
# deploys to development environment when merging to develop branch
- name: release-dev
  tag: develop
  type: serial
  steps:
    - name: build-dev
      service: build-dev
      command: yarn build:dev
    - name: deploy-dev
      service: deploy-dev
      command: /deploy/scripts/deploy.sh -b /deploy/build

# development
# ----------
# deploys to development environment when merging to develop branch
- name: release-prod
  tag: master
  type: serial
  steps:
  - name: build-prod
    service: build-prod
    command: yarn build:prod
  - name: deploy-prod
    service: deploy-prod
    command: /deploy/scripts/deploy.sh -b /deploy/build
